.Prometheus
Был создан в 2012 SoundCloud.
Является базой Данных временных рядов, включающая в себя целую экосистему инструментов. Способен мониторить самые разные системы от серверов до пользовательский приложений. 

== _Принцип работы_:

Основной является скрейпинг конечных точек целевых объектов(target и по умолчанию должна находится по адресу hostaddr/metrics). Прометей посылает HTTP вызов к точкам, которые указываются в конфиг файле, и если точка можно дать данные нужного формата то Прометей то определит его как объект и с определенным интервалом делать запросы
КАРТИНКА Взаимодействия из хабра!!!!

== _Структура_:

Прометей состоит из трех компонентов:
[image:C65A0DB7-7BB6-460B-8F8E-08704B1C00A1-15088-000000CB8344EBD4/2022-12-14 23.09.34.jpg]

_Retrieval_ - представляет собой сервис по сбору метрик, именно он ходит по конечным точкам и собирает метрику помещая ее затем в хранилище.
Обладает тремя вариантами взятия метрик:
 - Готовые сервисы экспортеры наподобие node-exporter;
 - Пользовательские сервисы обладающие способность отдавать данные нужного формата;
 - Pushgateway стороной сервис помогающий собирать данные с пакетов или непредназначенных для этого приложений;
_Storage_ - сама база данных хранящая в себе данные объектов в виде временных рядов
КАРТИНКА
_HTTP Server_ - представляет API к storage для визуализации в простом встроенным GUI или подключению к Graphana. Также дает возможность агрегировать и обрабатывать данные различными запросами PromQl

== _Alert Manager_

Также к прометею можно подсоеденить менеджера способного отследить какое либо событие(например значение превысило заданную границу) и отправить на почту оповещение.

== _Метрики_

Метрики в промети имеют два атрибута:
HELP - описание метрики, для чего и зачем…
TYPE - один из трех встроенных типов метрики
 Counter - сколько раз что то произошло…(обязательно должен расти)
 Gauge - какое текущее значение чего то…(но он не показывает развитие метрики)
 Histogram - насколько что то большое, насколько что то длинное(могут расчитывать среднее значение и относительные измерения значений)

== _Отличие от InfluxDB_

[image:6308DBC1-7E9C-412E-BDE6-4CC5F766C008-15088-000000CB522D8F3C/2022-12-14 23.08.58.jpg]
Это дает контроль и централизованность, а также убирает узкую точку в системе мониторинга.
Также в отличии от других подобных сервисов он не перехватывает отдельные события с привязной ко времени а собирает предварительно агрегированные метрики о сервисах.

== _Концепция_

Модель данных ключ-значение
Прометей работает с парами ключ-значение. Ключ описывает, что мы измеряем, а значение хранит фактическую величину в виде числа. Также в метрике содержатся разные labels для расширения информации
[image:34D251BA-A14B-48AF-8605-E862069AB4A9-15088-000000CB26F17C95/2022-12-14 23.08.07.jpg]

== _Структура конфиг файла_

Конфиг файл является YML файлов и он является основной для работы Прометея вы рассмотрим лишь некоторые из его множества полей. 

Global конфигурация определяет параметры, которые действительны во всех других контекстах конфигурации. Они также служат значениями по умолчанию для других разделов конфигурации. 

Раздел scrape_config определяет набор целевых объектов и параметров, описывающих, как их очистить. В общем случае одна конфигурация очистки определяет одно задание. В расширенных конфигурациях это может измениться.

Целевые объекты могут быть статически сконфигурированы с помощью параметра static_configs или динамически обнаружены с использованием одного из поддерживаемых механизмов обнаружения служб.

tls_config позволяет настраивать соединения TLS. 

Конфигурации Docker SD позволяют извлекать целевые объекты scrape с хостов Docker Engine.

Эта SD-карта обнаруживает “контейнеры” и создаст цель для каждого сетевого IP-адреса и порта, на который настроен контейнер.